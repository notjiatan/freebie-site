---
import BaseLayout from "@components/base/BaseLayout.astro";
import { markdownify } from "@lib/textConverter";
import Button from "@components/common/Button.astro";
import Footer from "@components/base/Footer.astro";
import type { HomeEntry } from "@/types";
import { Image } from "astro:assets";

interface Props {
  entry: HomeEntry;
}

const { entry } = Astro.props;
const { image, imageAlt, title, content, button } = entry.data;
---

<BaseLayout>
  <!-- Banner -->
  <section class="section">
    <div class="container">
      <div class="row justify-center">
        <div class="text-center lg:col-6">
          {
            image && (
              <div class="blur-[0px]">
                <Image
                class="mb-6 w-64 svg-glow"
                src={image}
                alt={imageAlt}
                width={1024}
                height={1024}
                loading="eager"
              />
              </div>
              
            )
          }
          <h1 set:html={markdownify(title)} class="mb-4 flicker-text neon-title" />
          <p set:html={markdownify(content)} class="mb-8 neon-subtitle" />
          {
            button && (
              <Button
                label={button.label}
                link={button.link}
                newtab
                hoverInvert
                color=""
              />
            )
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Electric Border Card Section -->
  <section class="section">
    <div class="container">
      <div class="row justify-center">
        <div class="flex justify-center">
          <!-- SVG Filters for turbulent displacement effect -->
          <svg style="position: absolute; width: 0; height: 0;">
            <defs>
              <filter id="turbulent-displace" colorInterpolationFilters="sRGB" x="-20%" y="-20%" width="140%" height="140%">
                <!-- First turbulence animation -->
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="1" />
                <feOffset in="noise1" dx="0" dy="0" result="offsetNoise1">
                  <animate attributeName="dy" values="700; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <!-- Second turbulence animation -->
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="1" />
                <feOffset in="noise2" dx="0" dy="0" result="offsetNoise2">
                  <animate attributeName="dy" values="0; -700" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <!-- Third turbulence animation -->
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise3" seed="2" />
                <feOffset in="noise3" dx="0" dy="0" result="offsetNoise3">
                  <animate attributeName="dx" values="490; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <!-- Fourth turbulence animation -->
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise4" seed="2" />
                <feOffset in="noise4" dx="0" dy="0" result="offsetNoise4">
                  <animate attributeName="dx" values="0; -490" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <!-- Combine noise effects -->
                <feComposite in="offsetNoise1" in2="offsetNoise2" result="part1" />
                <feComposite in="offsetNoise3" in2="offsetNoise4" result="part2" />
                <feBlend in="part1" in2="part2" mode="color-dodge" result="combinedNoise" />

                <!-- Apply displacement to source graphic -->
                <feDisplacementMap in="SourceGraphic" in2="combinedNoise" scale="30" xChannelSelector="R" yChannelSelector="B" />
              </filter>
            </defs>
          </svg>

          <!-- Electric Border Card Component -->
          <div class="electric-card-container">
            <div class="electric-inner-container">
              <div class="electric-border-outer">
                <div class="electric-main-card"></div>
              </div>
              <div class="electric-glow-layer-1"></div>
              <div class="electric-glow-layer-2"></div>
            </div>

            <!-- Overlay effects for additional lighting -->
            <div class="electric-overlay-1"></div>
            <div class="electric-overlay-2"></div>
            <div class="electric-background-glow"></div>

            <!-- Card content -->
            <div class="electric-content-container">
              <div class="electric-content-top">
                <div class="electric-scrollbar-glass">
                  Finder Plus
                </div>
                <p class="electric-title"><u>You Unlock:</u></p>
              </div>

              <hr class="electric-divider" />

              <div class="electric-content-bottom">
                <p class="electric-description">> Unlimited Refills<br>> Much Much Faster Cooldowns<br>> Unlock ALL <u>(12)</u> of our Providers That We Offer<br>> Priority 24/7 Customer Support</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<Footer />
